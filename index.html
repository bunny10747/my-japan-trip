<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åŒ—æµ·é“è‡ªé§•éš¨èº« App v6.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: -apple-system, "Noto Sans TC", sans-serif; background-color: #F3F4F6; color: #111827; }
        .tab-content { display: none; padding: 12px; animation: fadeIn 0.2s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .glass-card { background: white; border-radius: 12px; border: 1px solid #E5E7EB; margin-bottom: 10px; padding: 14px; position: relative; }
        .nav-btn.active { color: #2563EB; font-weight: 800; }
        .edit-mode [contenteditable="true"] { border: 1px dashed #3B82F6; padding: 4px; border-radius: 4px; background: #EFF6FF; min-height: 1em; }
        .btn-add { width: 100%; border: 2px dashed #D1D5DB; padding: 10px; border-radius: 12px; color: #9CA3AF; font-size: 12px; margin-top: 10px; display: none; }
        .edit-mode .btn-add { display: block; }
        .meal-tag { font-size: 10px; padding: 2px 5px; border-radius: 4px; background: #FFEDD5; color: #9A3412; font-weight: bold; }
        .photo-preview { width: 100%; border-radius: 8px; margin-top: 8px; object-fit: cover; max-height: 250px; display: none; }
        .photo-preview.active { display: block; }
        .info-label { font-size: 10px; color: #9CA3AF; font-weight: bold; text-transform: uppercase; }
        .nav-link-btn { background: #F0F7FF; color: #2563EB; padding: 6px 12px; border-radius: 8px; font-size: 11px; font-weight: bold; display: flex; align-items: center; gap: 4px; }
    </style>
</head>
<body class="pb-40">

    <header class="sticky top-0 z-50 bg-white border-b border-gray-200 p-3 flex justify-between items-center px-4">
        <h1 class="text-sm font-black tracking-widest uppercase">Hokkaido 2026</h1>
        <button id="editToggle" onclick="toggleEditMode()" class="bg-gray-100 p-2 rounded-full text-gray-600">
            <i data-lucide="settings" class="w-5 h-5"></i>
        </button>
    </header>

    <div id="saveBar" class="hidden fixed top-14 left-0 right-0 bg-blue-600 text-white text-[10px] p-2 text-center z-40">
        ç·¨è¼¯æ¨¡å¼ä¸­ - é»æ“Šå³ä¸Šè§’è¨­å®šåœ–ç¤ºå„²å­˜è®Šæ›´
    </div>

    <main class="max-w-md mx-auto" id="appMain">
        
        <div id="schedule" class="tab-content active">
            <h2 class="text-lg font-bold mb-3 text-blue-700">ğŸ—“ï¸ æ¯æ—¥è¡Œç¨‹è¦åŠƒ</h2>
            <div id="scheduleList">
                <script>
                    const dayData = [
                        { d: "1/11 (æ—¥)", c: "â˜€ï¸ ä¸Šåˆ: 10:55 æŠµé”æ–°åƒæ­² â” ç§Ÿè»Š â” é£¯åº—<br><span class='meal-tag'>åˆé¤</span> æœ­å¹Œå¸‚å€<br>â˜ï¸ ä¸‹åˆ: å®šå±±æºªæº«æ³‰<br><span class='meal-tag'>æ™šé¤</span> æœ­å¹Œå£½å–œç‡’" },
                        { d: "1/12 (ä¸€)", c: "â˜€ï¸ ä¸Šåˆ: é›ªå ´é¸ä¸€(æ‰‹ç¨»/ç›¤æºª)<br><span class='meal-tag'>åˆé¤</span> å¸‚å€æˆ–æ²¿é€”<br>â˜ï¸ ä¸‹åˆ: å¾€å¯Œè‰¯é‡ Check-in<br>ğŸŒ™ æ™šä¸Š: ç²¾éˆéœ²å°/è¾²å¤«å¸‚é›†è²·è‰è“" },
                        { d: "1/13 (äºŒ)", c: "â˜€ï¸ ä¸Šåˆ: å¯Œè‰¯é‡é›ªå ´æ»‘é›ª<br>â˜ï¸ ä¸‹åˆ: æŒçºŒç·´ç¿’<br>ğŸŒ™ æ™šä¸Š: å¤œæ»‘ + æº«æ³‰" },
                        { d: "1/14 (ä¸‰)", c: "â˜€ï¸ ä¸Šåˆ: ç¥å±…æˆ–æ»‘é›ªæ‘<br>â˜ï¸ ä¸‹åˆ: æŒçºŒæ»‘é›ª<br>ğŸŒ™ æ™šä¸Š: æ³¡æº«æ³‰(ç‹å­å¤§é£¯åº—)" },
                        { d: "1/15 (å››)", c: "â˜€ï¸ ä¸Šåˆ: é›²éœ„é£›è»Šä¹‹è·¯/ç™½é¬šç€‘å¸ƒ<br><span class='meal-tag'>åˆé¤</span> æœ­å¹Œå¸‚å€<br>â˜ï¸ ä¸‹åˆ: å¸‚å€é€›è¡—" },
                        { d: "1/16 (äº”)", c: "â˜€ï¸ ä¸Šåˆ: æ©Ÿå ´é‚„è»Š/é€›åœ‹å…§ç·š<br>âœˆï¸ 11:55 IT235 èµ·é£›" }
                    ];
                    dayData.forEach((day, i) => {
                        document.write(`
                            <div class="glass-card border-l-4 border-blue-600">
                                <p class="font-bold text-sm" contenteditable="true">Day ${i+1} - ${day.d}</p>
                                <div class="text-xs space-y-2 mt-2" contenteditable="true">${day.c}</div>
                                <img src="" class="photo-preview" id="img-day-${i}">
                                <input type="file" class="hidden" onchange="handleImage(this, 'img-day-${i}')">
                                <button class="text-[10px] text-blue-500 mt-2 edit-mode-only hidden" onclick="triggerFile(this)">ğŸ“· æ–°å¢ç…§ç‰‡</button>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('scheduleList')">+ æ–°å¢è¡Œç¨‹å‚™è¨»</button>
        </div>

        <div id="food" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-orange-600">ğŸ± é¤å»³æ¸…å–®</h2>
            <div id="foodList">
                <script>
                    const foods = ["ä¸‰å…‰èˆå£½å–œç‡’", "ç‰›ã—ã‚ƒã¶ ç‰›ã™ã ç¦ª", "Shabu Shabu LetUs", "Donguri OdoriéºµåŒ…", "è€€ã„(èŸ¹åƒåˆ°é£½)", "ç‡’è‚‰å¾·å£½ K-Place", "RAZANç‡’è‚‰", "æ ¹å®¤èŠ±ä¸¸", "äºŒæ¢å¸‚å ´ ä¸¼å…µè¡›", "äºŒæ¢å¸‚å ´ DONBURIèŒ¶å±‹", "äºŒæ¢å¸‚å ´ èŸ¹å·¥èˆ¹", "éºµå±‹ å½©æœª", "ç´”é€£ æ‹‰éºµ", "å‰å±±å•†åº—", "è–„é‡ èƒèŸ¹äº­", "è–„é‡ é›ªè¯äº­", "æˆå‰æ€æ±— é”æ‘©", "é›ªå°å†°æ·‡æ·‹", "å¸‚å ´é£Ÿå ‚", "Toriton æ—­ç¥åº—"];
                    foods.forEach((f, i) => {
                        document.write(`
                            <div class="glass-card flex justify-between items-start">
                                <div class="pr-2">
                                    <p class="font-bold text-xs" contenteditable="true">${f}</p>
                                    <p class="desc-text" contenteditable="true">é»æ“Šç·¨è¼¯æè¿°å…§å®¹...</p>
                                </div>
                                <a href="https://www.google.com/maps/d/u/0/embed?mid=1J0vf6BMX9f5Jxqn-kRZBUYkOywqnrc0&ehbc=2E312F&noprof=1" target="_blank" class="nav-link-btn flex-shrink-0"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('foodList')">+ æ–°å¢é¤å»³</button>
        </div>

        <div id="shop" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-green-600">ğŸ›ï¸ è³¼ç‰© & ä¼´æ‰‹ç¦®</h2>
            <div id="shopList">
                <script>
                    const shops = ["å¯Œè‰¯é‡è¾²å¤«å¸‚é›†", "Montbell å¤§é›ªæ±å·åº—", "æ¾æœ¬æ¸…", "å”å‰è¨¶å¾·", "ç„¡å°è‰¯å“ PARCO", "ç‹¸å°è·¯2ä¸ç›®", "å…­èŠ±äº­ æœ­å¹Œæœ¬åº—", "å¤§ä¸¸æœ­å¹Œ"];
                    shops.forEach(s => {
                        document.write(`
                            <div class="glass-card flex justify-between items-start">
                                <div><p class="font-bold text-xs" contenteditable="true">${s}</p><p class="desc-text" contenteditable="true">é»æ“Šç·¨è¼¯å‚™è¨»...</p></div>
                                <a href="https://www.google.com/maps/dir/?api=1&destination=New+Chitose+Airport" target="_blank" class="nav-link-btn flex-shrink-0"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('shopList')">+ æ–°å¢è³¼ç‰©é»</button>
        </div>

        <div id="spots" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-purple-600">ğŸ“¸ æ™¯é»æ”»ç•¥</h2>
            <div id="spotsList">
                <script>
                    const spots = ["è«è¨ªç¥ç¤¾", "æ‘©è‰¾å·¨åƒ", "PARCO(JUMP SHOP)", "è—»å²©å±±", "å®šå±±æºªæº«æ³‰è¡—", "è±å¹³å³½æº«æ³‰", "é›²éœ„é£›è»Šä¹‹è·¯", "ç™½é¬šç€‘å¸ƒ"];
                    spots.forEach(s => {
                        document.write(`
                            <div class="glass-card flex justify-between items-start">
                                <div><p class="font-bold text-xs" contenteditable="true">${s}</p><p class="desc-text" contenteditable="true">é»æ“Šç·¨è¼¯æ”»ç•¥...</p></div>
                                <a href="https://www.google.com/maps/search/?api=1&query=Sapporo+Teine" target="_blank" class="nav-link-btn flex-shrink-0"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('spotsList')">+ æ–°å¢æ™¯é»</button>
        </div>

        <div id="mapTab" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-red-600">ğŸ—ºï¸ æ™¯é»åˆ†ä½ˆåœ°åœ–</h2>
            <div class="h-[500px] w-full rounded-xl overflow-hidden border">
                <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1J0vf6BMX9f5Jxqn-kRZBUYkOywqnrc0&ehbc=2E312F&noprof=1" width="100%" height="100%" frameborder="0"></iframe>
            </div>
        </div>

        <div id="info" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-blue-800">â„¹ï¸ é‡è¦æ—…éŠè³‡è¨Š</h2>
            
            <div class="glass-card">
                <p class="info-label">âœˆï¸ èˆªç­ & èˆªå»ˆè©³ç´°è³‡è¨Š</p>
                <div class="text-xs space-y-3 mt-3" contenteditable="true">
                    <div class="border-l-2 border-orange-400 pl-2">
                        <p class="font-bold">å»ç¨‹ï¼š1/11 (IT234)</p>
                        <p>06:20 æ¡ƒåœ’ T1 â” 10:55 æ–°åƒæ­² <b>åœ‹éš›ç·šèˆªå»ˆ</b></p>
                    </div>
                    <div class="border-l-2 border-orange-400 pl-2">
                        <p class="font-bold">å›ç¨‹ï¼š1/16 (IT235)</p>
                        <p>11:55 æ–°åƒæ­² <b>åœ‹éš›ç·šèˆªå»ˆ</b> â” 15:35 æ¡ƒåœ’ T1</p>
                    </div>
                </div>
            </div>

            <div class="glass-card">
                <p class="info-label">ğŸš— ç§Ÿè»Šå–è»ŠæŒ‡å—</p>
                <div class="text-xs mt-3 bg-blue-50 p-3 rounded-lg text-blue-800 leading-relaxed" contenteditable="true">
                    <b>Rakuten Travel Rent-A-Car</b><br>
                    ç·¨è™Ÿï¼šRC32461046608501466<br><br>
                    <b>ä½ç½®ï¼š</b>æŠµé”åœ‹éš›ç·šå¾Œï¼Œè«‹å‰å¾€ã€Œåœ‹å…§èˆªå»ˆ 1 æ¨“ã€3 è™Ÿåˆ°é”å£é™„è¿‘çš„ç§Ÿè»Šæ«ƒæª¯è¾¦ç†æ‰‹çºŒã€‚
                </div>
            </div>

            <div class="glass-card">
                <p class="info-label">ğŸ¨ é£¯åº—å°èˆª (Booking)</p>
                <div class="space-y-3 mt-3">
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                        <div class="text-xs">
                            <p class="font-bold">Sotetsu Fresa Inn</p>
                            <p class="text-[9px] text-gray-500">1/11-12 (æœ­å¹Œè–„é‡)</p>
                        </div>
                        <a href="https://www.google.com/maps/search/å®šå±±æºªæº«æ³‰" class="nav-link-btn"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-blue-50 rounded-lg">
                        <div class="text-xs text-blue-800">
                            <p class="font-bold">AIR FURANO</p>
                            <p class="text-[9px] text-blue-400">1/12-15 (å¯Œè‰¯é‡)</p>
                        </div>
                        <a href="https://www.google.com/maps/search/Sapporo+Teine" class="nav-link-btn"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                        <div class="text-xs">
                            <p class="font-bold">Via inn Prime</p>
                            <p class="text-[9px] text-gray-500">1/15-16 (å¤§é€šå…¬åœ’)</p>
                        </div>
                        <a href="https://www.google.com/maps/search/Sapporo+bankei" class="nav-link-btn"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t p-2 pb-10 z-50 flex justify-around shadow-lg">
        <button onclick="showTab('schedule')" class="nav-btn flex flex-col items-center gap-1 active"><i data-lucide="calendar" class="w-5 h-5"></i><span class="text-[9px]">è¡Œç¨‹</span></button>
        <button onclick="showTab('food')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="utensils" class="w-5 h-5"></i><span class="text-[9px]">é¤å»³</span></button>
        <button onclick="showTab('shop')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="shopping-bag" class="w-5 h-5"></i><span class="text-[9px]">è³¼ç‰©</span></button>
        <button onclick="showTab('spots')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="map-pin" class="w-5 h-5"></i><span class="text-[9px]">æ™¯é»</span></button>
        <button onclick="showTab('mapTab')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="map" class="w-5 h-5"></i><span class="text-[9px]">åœ°åœ–</span></button>
        <button onclick="showTab('info')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="info" class="w-5 h-5"></i><span class="text-[9px]">è³‡è¨Š</span></button>
    </nav>

    <script>
        let isEditMode = false;
        lucide.createIcons();

        function toggleEditMode() {
            isEditMode = !isEditMode;
            const main = document.getElementById('appMain');
            const saveBar = document.getElementById('saveBar');
            if (isEditMode) {
                main.classList.add('edit-mode');
                saveBar.classList.remove('hidden');
                document.querySelectorAll('.edit-mode-only').forEach(el => el.classList.remove('hidden'));
            } else {
                main.classList.remove('edit-mode');
                saveBar.classList.add('hidden');
                document.querySelectorAll('.edit-mode-only').forEach(el => el.classList.add('hidden'));
                saveData();
            }
        }

        function triggerFile(btn) { btn.previousElementSibling.click(); }

        function handleImage(input, imgId) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById(imgId);
                    img.src = e.target.result;
                    img.classList.add('active');
                }
                reader.readAsDataURL(file);
            }
        }

        function addNewCard(containerId) {
            const container = document.getElementById(containerId);
            const id = Date.now();
            const html = `
                <div class="glass-card">
                    <p class="font-bold text-sm" contenteditable="true">è‡ªè¨‚æ–°åœ°é»</p>
                    <div class="text-xs mt-2" contenteditable="true">åœ¨æ­¤è¼¸å…¥å…§å®¹...</div>
                    <img src="" class="photo-preview" id="img-${id}">
                    <input type="file" class="hidden" onchange="handleImage(this, 'img-${id}')">
                    <button class="text-[10px] text-blue-500 mt-2 edit-mode-only" onclick="triggerFile(this)">ğŸ“· æ–°å¢ç…§ç‰‡</button>
                    <button class="absolute top-2 right-2 text-red-400 edit-mode-only" onclick="this.parentElement.remove()">âœ•</button>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            window.scrollTo(0,0);
        }

        function saveData() {
            localStorage.setItem('hokkaidoAppData_v6_1', document.getElementById('appMain').innerHTML);
        }

        window.onload = () => {
            const savedData = localStorage.getItem('hokkaidoAppData_v6_1');
            if (savedData) { document.getElementById('appMain').innerHTML = savedData; }
            lucide.createIcons();
        };
    </script>
</body>
</html>
