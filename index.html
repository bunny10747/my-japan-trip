<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>åŒ—æµ·é“è‡ªé§•éš¨èº« App v6.2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: -apple-system, "Noto Sans TC", sans-serif; background-color: #F3F4F6; color: #111827; }
        .tab-content { display: none; padding: 12px; animation: fadeIn 0.2s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .glass-card { background: white; border-radius: 12px; border: 1px solid #E5E7EB; margin-bottom: 10px; padding: 14px; position: relative; }
        .nav-btn.active { color: #2563EB; font-weight: 800; }
        .edit-mode [contenteditable="true"] { border: 1px dashed #3B82F6; padding: 4px; border-radius: 4px; background: #EFF6FF; min-height: 1em; }
        .btn-add { width: 100%; border: 2px dashed #D1D5DB; padding: 10px; border-radius: 12px; color: #9CA3AF; font-size: 12px; margin-top: 10px; display: none; }
        .edit-mode .btn-add { display: block; }
        .meal-tag { font-size: 10px; padding: 2px 5px; border-radius: 4px; background: #FFEDD5; color: #9A3412; font-weight: bold; }
        .photo-preview { width: 100%; border-radius: 8px; margin-top: 8px; object-fit: cover; max-height: 250px; display: none; }
        .photo-preview.active { display: block; }
        .info-label { font-size: 10px; color: #9CA3AF; font-weight: bold; text-transform: uppercase; }
        .nav-link-btn { background: #F0F7FF; color: #2563EB; padding: 6px 12px; border-radius: 8px; font-size: 11px; font-weight: bold; display: flex; align-items: center; gap: 4px; }
        .desc-text { font-size: 11px; color: #4B5563; line-height: 1.5; margin-top: 5px; white-space: pre-line; }
    </style>
</head>
<body class="pb-40">

    <header class="sticky top-0 z-50 bg-white border-b border-gray-200 p-3 flex justify-between items-center px-4">
        <h1 class="text-sm font-black tracking-widest uppercase">Hokkaido 2026</h1>
        <button id="editToggle" onclick="toggleEditMode()" class="bg-gray-100 p-2 rounded-full text-gray-600">
            <i data-lucide="settings" class="w-5 h-5"></i>
        </button>
    </header>

    <div id="saveBar" class="hidden fixed top-14 left-0 right-0 bg-blue-600 text-white text-[10px] p-2 text-center z-40">
        ç·¨è¼¯æ¨¡å¼ä¸­ - é»æ“Šå³ä¸Šè§’è¨­å®šåœ–ç¤ºå„²å­˜è®Šæ›´
    </div>

    <main class="max-w-md mx-auto" id="appMain">
        
        <div id="schedule" class="tab-content active">
            <h2 class="text-lg font-bold mb-3 text-blue-700">ğŸ—“ï¸ æ¯æ—¥è¡Œç¨‹è¦åŠƒ</h2>
            <div id="scheduleList">
                <div class="glass-card border-l-4 border-blue-600">
                    <p class="font-bold text-sm" contenteditable="true">Day 1 - 1/11 (æ—¥)</p>
                    <div class="text-xs space-y-2 mt-2" contenteditable="true">
                        <p>â˜€ï¸ ä¸Šåˆ: 10:55 æŠµé”æ–°åƒæ­² â” ç§Ÿè»Š â” é£¯åº—æ”¾è¡Œæ</p>
                        <p><span class="meal-tag">åˆé¤</span> æœ­å¹Œå¸‚å€</p>
                        <p>â˜ï¸ ä¸‹åˆ: å®šå±±æºªæº«æ³‰è¡—æ³¡æ¹¯</p>
                        <p><span class="meal-tag">æ™šé¤</span> æœ­å¹Œå¸‚å€å£½å–œç‡’</p>
                        <p>ğŸŒ™ æ™šä¸Š: å¸‚å€é€›è¡— (å”å‰ã€PARCOã€æ¾æœ¬æ¸…)</p>
                    </div>
                </div>
                <div class="glass-card border-l-4 border-blue-600">
                    <p class="font-bold text-sm" contenteditable="true">Day 2 - 1/12 (ä¸€)</p>
                    <div class="text-xs space-y-2 mt-2" contenteditable="true">
                        <p>â˜€ï¸ ä¸Šåˆ: æ»‘é›ªå ´é¸ä¸€ï¼š<br>â€¢ æ‰‹ç¨» (è»Šç¨‹40åˆ†ï¼Œæ¯”è¼ƒå¤§)<br>â€¢ ç›¤æºª (è»Šç¨‹20åˆ†ï¼Œæ¯”è¼ƒå°)</p>
                        <p><span class="meal-tag">åˆé¤</span> æœ­å¹Œå¸‚å€æˆ–æ²¿é€”</p>
                        <p>â˜ï¸ ä¸‹åˆ: å¾€å¯Œè‰¯é‡ Check-in</p>
                        <p><span class="meal-tag">æ™šé¤</span> å¯Œè‰¯é‡å¸‚å€</p>
                        <p>ğŸŒ™ æ™šä¸Š: è¾²å¤«å¸‚é›†è²·è‰è“ â” ç²¾éˆéœ²å°èµ°èµ°</p>
                    </div>
                </div>
                <div class="glass-card border-l-4 border-blue-600">
                    <p class="font-bold text-sm" contenteditable="true">Day 3 - 1/13 (äºŒ)</p>
                    <div class="text-xs space-y-2 mt-2" contenteditable="true">
                        <p>â˜€ï¸ ä¸Šåˆ: å¯Œè‰¯é‡æ»‘é›ª (æ•™ç·´èª²)</p>
                        <p>â˜ï¸ ä¸‹åˆ: æ»‘é›ª</p>
                        <p>ğŸŒ™ æ™šä¸Š: é«”é©—å¤œæ»‘ â” æ³¡æº«æ³‰</p>
                    </div>
                </div>
                <div class="glass-card border-l-4 border-blue-600">
                    <p class="font-bold text-sm" contenteditable="true">Day 4 - 1/14 (ä¸‰)</p>
                    <div class="text-xs space-y-2 mt-2" contenteditable="true">
                        <p>â˜ï¸ ä¸‹åˆ: ç¹¼çºŒæ»‘é›ª</p>
                        <p>ğŸŒ™ æ™šä¸Š: æ³¡æº«æ³‰ (ç‹å­å¤§é£¯åº—)</p>
                    </div>
                </div>
                <div class="glass-card border-l-4 border-blue-600">
                    <p class="font-bold text-sm" contenteditable="true">Day 5 - 1/15 (å››)</p>
                    <div class="text-xs space-y-2 mt-2" contenteditable="true">
                        <p>â˜€ï¸ ä¸Šåˆ: é›²éœ„é£›è»Šä¹‹è·¯ â” ç™½é¬šç€‘å¸ƒ</p>
                        <p><span class="meal-tag">åˆé¤</span> æœ­å¹Œå¸‚å€</p>
                        <p>â˜ï¸ ä¸‹åˆæ™šä¸Š: å¸‚å€é€›è¡—</p>
                    </div>
                </div>
            </div>
            <button class="btn-add" onclick="addNewCard('scheduleList')">+ æ–°å¢è¡Œç¨‹å‚™è¨»</button>
        </div>

        <div id="food" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-orange-600">ğŸ± é¤å»³æ¸…å–®</h2>
            <div id="foodList">
                <script>
                    const foodData = [
                        { n: "ä¸‰å…‰èˆå£½å–œç‡’ï¼Sukiyaki Sankousha", d: "æœ­å¹Œè€å­—è™Ÿå£½å–œç‡’ååº—" },
                        { n: "ç‰›ã—ã‚ƒã¶ ç‰›ã™ã ç¦ª", d: "é ‚ç´šç‰›æ¶®æ¶®é‹èˆ‡å£½å–œç‡’æ–™ç†" },
                        { n: "Shabu Shabu LetUs Susukino Branch", d: "è–„é‡ç²¾ç·»æ¶®æ¶®é‹" },
                        { n: "Donguri Odori", d: "å¤šäººæ¨éºµåŒ…åº—ï¼Œå¤§é€šå…¬åœ’æ—å¿…è²·" },
                        { n: "è€€ã„", d: "å¸ç‹èŸ¹åƒåˆ°é£½é¦–é¸" },
                        { n: "ç„¼è‚‰å¾³å¯¿ K-Place", d: "é«˜å“è³ªç‡’è‚‰èˆ‡å„ªé›…ç©ºé–“" },
                        { n: "RAZAN Charcoal-Grilled Wagyu Yakiniku", d: "è–„é‡åº—ï¼Œç‚­ç«ç‡’çƒ¤å’Œç‰›ç‡’è‚‰" },
                        { n: "æ ¹å®¤èŠ±ä¸¸ COCONO SUSUKINOåº—", d: "é®®åº¦ä¸€æµçš„ç†±é–€è¿´è½‰å£½å¸" },
                        { n: "äºŒæ¢å¸‚å ´ ä¸¼å…µè¡›", d: "èœå–®ç¨®é¡ç¹å¤šï¼Œå®¢äººå¯å¾å¤šé”50ç¨®èœå–®ä¸­é¸æ“‡è‡ªå·±å–œæ„›çš„æµ·é®®è“‹é£¯" },
                        { n: "äºŒæ¢å¸‚å ´ DONBURIèŒ¶å±‹", d: "ç†±è³£10ç¨®é…æ–™ã€Œåç‰©è“‹é£¯ã€ã€‚å¦æœ‰é»ƒé‡‘æµ·å¯¶è“‹é£¯ã€å¥¢è¯è“‹é£¯ç­‰ã€‚æ¨ã€Œæ¥µä¸Šç†Ÿæˆæµ·é®®è“‹é£¯ã€ï¼Œè·äººå°‡é®®é­šç†Ÿæˆå¾Œå‡èšç¾å‘³ã€‚" },
                        { n: "äºŒæ¢å¸‚å ´ èƒèŸ¹é¤å»³ èŸ¹å·¥èˆ¹", d: "ä¸»æ‰“èƒèŸ¹è“‹é£¯ï¼Œæœ‰æ°´ç…®èŸ¹è‚‰ã€é®­é­šåµæˆ–æµ·è†½é›™æ‹¼ã€‚é‚„æœ‰ç”Ÿé›ªå ´èŸ¹è‚‰ç”Ÿé­šç‰‡è“‹é£¯ã€‚æ—©ä¸Š8é»é–‹å§‹ç‡Ÿæ¥­ï¼Œæ¨è–¦æ—©é¤äº«ç”¨ã€‚" },
                        { n: "éºµå±‹ å½©æœª", d: "ä»£è¡¨åŒ—æµ·é“å‘³å™Œæ‹‰éºµæœ€é«˜å³°ï¼Œé€ è¨ªæœ­å¹Œå¿…åƒæ‹‰éºµåº—" },
                        { n: "ç´”é€£ ä¸­ä¹‹å³¶æœ¬åº—", d: "æ¹¯é ­æ¿ƒé†‡å‘³å™Œèˆ‡ç‚’è±¬è‚‰é¦™æ°£ï¼Œè±¬æ²¹è”¬èœé®®ç”œï¼Œå‰ç‡’æ”¾æœ‰è–‘æ³¥ï¼Œå¯’å†¬æš–èº«å¿…åƒ" },
                        { n: "å‰å±±å•†åº— æœ¬åº—", d: "æœ€ç†±éŠ·ã€ŒåŸ¹ç…èƒ¡éº»å‘³å™Œæ‹‰éºµã€ã€‚è±šéª¨åº•åŠ èƒ¡éº»é«˜æ¹¯ï¼Œå£æ„Ÿæ¿ƒåšå±¤æ¬¡è±å¯Œï¼Œç¨±â€œé€²åŒ–ç‰ˆæœ­å¹Œæ‹‰éºµâ€ã€‚" },
                        { n: "è–„é‡ èƒèŸ¹äº­", d: "å—æ­¡è¿ã€ŒèƒèŸ¹å…¨é¤ã€ï¼Œæœ‰æ´»èŸ¹ç”Ÿé­šç‰‡ã€ç¾ç…®æ°´ç…®æ´»èŸ¹ã€çƒ¤é›ªå ´èŸ¹ã€‚å¦æœ‰èƒèŸ¹ç‡’è³£ã€ç…çƒ¤é›ªå ´èŸ¹ã€å¥¶æ²¹é¦¬éˆ´è–¯ã€‚" },
                        { n: "è–„é‡ èƒèŸ¹èˆ‡é“ç”¢æ–™ç† é›ªè¯äº­", d: "å¥—é¤ä¸­æœ€æ„›ã€ŒåŒ—æµ·æ¾è‘‰èŸ¹æ¶®æ¶®é‹ã€ï¼Œé®®ç¾æ»‹å‘³ç„¡æ³•æ¯”æ“¬" },
                        { n: "è–„é‡ æˆå‰æ€æ±— é”æ‘© æœ¬åº—", d: "è–„é‡åç‰©æ–™ç†ã€‚éš±è—ç‰ˆï¼šå°‡å¸æ»¿è‚‰æ±é†¬æ±çš„æ‹Œé£¯å€’å…¥ç„™èŒ¶åšèŒ¶æ³¡é£¯ã€‚" },
                        { n: "é›ªå°å†°æ·‡æ·‹ æœ­å¹Œæœ¬åº—", d: "å°ˆç‚ºæ˜­å’Œå¤©çš‡è£½ä½œçš„å†°æ·‡æ·‹ã€ŒSnow Royalã€ï¼ŒåŠ30å¤šç¨®ç™¾åŒ¯ã€‚" },
                        { n: "å¸‚å ´é£Ÿå ‚ (å¸‚å ´å®šé£Ÿ)", d: "åœ¨åœ°å¸‚å ´é¢¨æ ¼çš„å¹³åƒ¹è±å¯Œå®šé£Ÿ" },
                        { n: "è¿´è½‰å£½å¸ Toriton æ—­ç¥åº—", d: "çŸ¥åé«˜è©•åƒ¹è¿´è½‰å£½å¸åº—" }
                    ];
                    foodData.forEach(item => {
                        document.write(`
                            <div class="glass-card flex justify-between items-start">
                                <div><p class="font-bold text-xs" contenteditable="true">${item.n}</p><p class="desc-text" contenteditable="true">${item.d}</p></div>
                                <a href="https://www.google.com/maps/search/?api=1&query=æœ­å¹Œæ‰‹ç¨»æ»‘é›ªå ´8{encodeURIComponent(item.n)}" target="_blank" class="nav-link-btn flex-shrink-0"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('foodList')">+ æ–°å¢é¤å»³</button>
        </div>

        <div id="shop" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-green-600">ğŸ›ï¸ è³¼ç‰© & ä¼´æ‰‹ç¦®</h2>
            <div id="shopList">
                <script>
                    const shopData = [
                        { n: "å¯Œè‰¯é‡è¾²å¤«å¸‚é›†", d: "è²·è‰è“" },
                        { n: "Montbell Daisetsu Higashikawa Store", d: "å¤§å‹æ——è‰¦åº—" },
                        { n: "æ¾æœ¬æ¸…", d: "è²·åˆ©å°»æ˜†å¸ƒæŸ“é«®" },
                        { n: "å”å‰è¨¶å¾·", d: "è²·è¿·ä½ ç›¸æ©Ÿ" },
                        { n: "ç„¡å°è‰¯å“ PARCOæœ­å¹Œåº—", d: "è²·ç·šé¦™" },
                        { n: "ç‹¸å°è·¯2ä¸ç›®", d: "æœ‰è¶…éç™¾å¹´æ­·å²ï¼ŒåŒ—æµ·é“æœ€å¤è€ BEER HALLã€Œç‹¸å°è·¯LIONã€ï¼Œäººæ°£æ·±åº¦æ™¯é»ã€‚" },
                        { n: "å…­èŠ±äº­ æœ­å¹Œæœ¬åº—", d: "èŠå§†è‘¡è„é¤…ä¹¾ä¼´æ‰‹ç¦®åº—" },
                        { n: "å¤§ä¸¸æœ­å¹Œ", d: "B1ã€ŒHoppe Townã€ï¼šLeTAOèµ·å¸è›‹ç³•ã€ROYCEâ€™å·§å…‹åŠ›ã€åŒ—è“æ¨“ç±³è“ç­‰ååº—é½Šèšã€‚" }
                    ];
                    shopData.forEach(item => {
                        document.write(`
                            <div class="glass-card flex justify-between items-start">
                                <div><p class="font-bold text-xs" contenteditable="true">${item.n}</p><p class="desc-text" contenteditable="true">${item.d}</p></div>
                                <a href="https://www.google.com/maps/search/?api=1&query=æœ­å¹Œæ‰‹ç¨»æ»‘é›ªå ´9{encodeURIComponent(item.n)}" target="_blank" class="nav-link-btn flex-shrink-0"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('shopList')">+ æ–°å¢è³¼ç‰©é»</button>
        </div>

        <div id="spots" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-purple-600">ğŸ“¸ æ™¯é»æ”»ç•¥</h2>
            <div id="spotsList">
                <script>
                    const spotData = [
                        { n: "è«è¨ªç¥ç¤¾", d: "è²·ç°ç©ºå¾¡å®ˆ" },
                        { n: "Makomanai Takino Cemetery", d: "æ‘©è‰¾å·¨åƒ" },
                        { n: "PARCOæœ­å¹Œ", d: "JUMP SHOP(å°‘å¹´JUMPå‘¨é‚Š)ã€æ©¡å­å…±å’Œåœ‹(å‰åœåŠ›å•†å“)" },
                        { n: "è—»å²©å±±", d: "ä¸‰å¤§å¤œæ™¯" },
                        { n: "å®šå±±æºªæº«æ³‰è¡—", d: "ç´„150å¹´å‰ç”±ä¿®è¡Œåƒ§ç¾æ³‰å®šå±±å»ºé€ ï¼Œæ­·å²æ‚ ä¹…ã€‚" },
                        { n: "è±å¹³å³½æº«æ³‰", d: "å”¯ä¸€å°‡æºæ³‰ç›´æ¥æ³¨å…¥æµ´æ± ï¼Œæœ‰æ—¥æœ¬æœ€å¤§éœ²å¤©æµ´æ± ã€‚" },
                        { n: "é›²éœ„é£›è»Šä¹‹è·¯", d: "çµ•ç¾è‡ªé§•å…¬è·¯" },
                        { n: "ç™½é¬šç€‘å¸ƒ", d: "å†¬æ—¥ç¾æ™¯" }
                    ];
                    spotData.forEach(item => {
                        document.write(`
                            <div class="glass-card flex justify-between items-start">
                                <div><p class="font-bold text-xs" contenteditable="true">${item.n}</p><p class="desc-text" contenteditable="true">${item.d}</p></div>
                                <a href="https://www.google.com/maps/search/?api=1&query=New+Chitose+Airport+Rent-a-car0{encodeURIComponent(item.n)}" target="_blank" class="nav-link-btn flex-shrink-0"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                            </div>
                        `);
                    });
                </script>
            </div>
            <button class="btn-add" onclick="addNewCard('spotsList')">+ æ–°å¢æ™¯é»</button>
        </div>

        <div id="mapTab" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-red-600">ğŸ—ºï¸ æ™¯é»åœ°åœ–</h2>
            <div class="h-[500px] w-full rounded-xl overflow-hidden border">
                <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1J0vf6BMX9f5Jxqn-kRZBUYkOywqnrc0&ehbc=2E312F&noprof=1" width="100%" height="100%" frameborder="0"></iframe>
            </div>
        </div>

        <div id="info" class="tab-content">
            <h2 class="text-lg font-bold mb-3 text-blue-800">â„¹ï¸ é‡è¦è³‡è¨Š</h2>
            
            <div class="glass-card">
                <p class="info-label">âœˆï¸ èˆªç­ (åœ‹éš›ç·šèˆªå»ˆ)</p>
                <div class="text-xs space-y-2 mt-2" contenteditable="true">
                    <p><b>1/11 IT234:</b> 06:20 TPE T1 â” 10:55 CTS</p>
                    <p><b>1/16 IT235:</b> 11:55 CTS â” 15:35 TPE T1</p>
                </div>
            </div>

            <div class="glass-card">
                <p class="info-label">ğŸš— ç§Ÿè»Šé ç´„</p>
                <div class="text-xs mt-2 p-3 bg-blue-50 rounded-lg text-blue-800" contenteditable="true">
                    <b>Rakuten Travel:</b> RC32461046608501466<br>
                    ä½ç½®ï¼šæŠµé”å¾Œå¾€ã€Œåœ‹å…§èˆªå»ˆ1Fã€3è™Ÿé–€æ«ƒæª¯ã€‚
                </div>
            </div>

            <div class="glass-card">
                <p class="info-label">ğŸ¨ é£¯åº—å°èˆª</p>
                <div class="space-y-3 mt-3">
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                        <div class="text-xs"><p class="font-bold">Sotetsu Fresa Inn</p><p class="text-[9px]">1/11-12</p></div>
                        <a href="https://www.google.com/maps/search/å®šå±±æºªæº«æ³‰" class="nav-link-btn"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-blue-50 rounded-lg">
                        <div class="text-xs text-blue-800"><p class="font-bold">AIR FURANO</p><p class="text-[9px]">1/12-15</p></div>
                        <a href="https://www.google.com/maps/search/Sapporo+Teine" class="nav-link-btn"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                    </div>
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded-lg">
                        <div class="text-xs"><p class="font-bold">Via inn Prime</p><p class="text-[9px]">1/15-16</p></div>
                        <a href="https://www.google.com/maps/search/Sapporo+bankei" class="nav-link-btn"><i data-lucide="navigation" class="w-3 h-3"></i>å°èˆª</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t p-2 pb-10 z-50 flex justify-around shadow-lg">
        <button onclick="showTab('schedule')" class="nav-btn flex flex-col items-center gap-1 active"><i data-lucide="calendar" class="w-5 h-5"></i><span class="text-[9px]">è¡Œç¨‹</span></button>
        <button onclick="showTab('food')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="utensils" class="w-5 h-5"></i><span class="text-[9px]">é¤å»³</span></button>
        <button onclick="showTab('shop')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="shopping-bag" class="w-5 h-5"></i><span class="text-[9px]">è³¼ç‰©</span></button>
        <button onclick="showTab('spots')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="map-pin" class="w-5 h-5"></i><span class="text-[9px]">æ™¯é»</span></button>
        <button onclick="showTab('mapTab')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="map" class="w-5 h-5"></i><span class="text-[9px]">åœ°åœ–</span></button>
        <button onclick="showTab('info')" class="nav-btn flex flex-col items-center gap-1"><i data-lucide="info" class="w-5 h-5"></i><span class="text-[9px]">è³‡è¨Š</span></button>
    </nav>

    <script>
        let isEditMode = false;
        lucide.createIcons();

        function toggleEditMode() {
            isEditMode = !isEditMode;
            document.getElementById('appMain').classList.toggle('edit-mode');
            document.getElementById('saveBar').classList.toggle('hidden');
            if (!isEditMode) saveData();
        }

        function triggerFile(btn) { btn.previousElementSibling.click(); }

        function handleImage(input, imgId) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = e => { 
                    const img = document.getElementById(imgId);
                    img.src = e.target.result;
                    img.classList.add('active');
                }
                reader.readAsDataURL(file);
            }
        }

        function addNewCard(containerId) {
            const id = Date.now();
            const html = `
                <div class="glass-card">
                    <p class="font-bold text-sm" contenteditable="true">æ–°é …ç›®</p>
                    <div class="text-xs mt-2" contenteditable="true">è¼¸å…¥æè¿°...</div>
                    <img src="" class="photo-preview" id="img-${id}">
                    <input type="file" class="hidden" onchange="handleImage(this, 'img-${id}')">
                    <button class="text-[10px] text-blue-500 mt-2" onclick="triggerFile(this)">ğŸ“· ç…§ç‰‡</button>
                    <button class="absolute top-2 right-2 text-red-400" onclick="this.parentElement.remove()">âœ•</button>
                </div>`;
            document.getElementById(containerId).insertAdjacentHTML('beforeend', html);
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            window.scrollTo(0,0);
        }

        function saveData() {
            localStorage.setItem('hokkaidoAppData_v6_2', document.getElementById('appMain').innerHTML);
        }

        window.onload = () => {
            const savedData = localStorage.getItem('hokkaidoAppData_v6_2');
            if (savedData) document.getElementById('appMain').innerHTML = savedData;
            lucide.createIcons();
        };
    </script>
</body>
</html>
